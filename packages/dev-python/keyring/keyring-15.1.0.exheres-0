# Copyright 2013 Jakob Nixdorf <flocke@shadowice.org>
# Distributed under the terms of the GNU General Public License v2

# Support python older than 3.5 requires secretstorage<3 which makes juggling versions annoying.
require setup-py [ import=setuptools test=pytest blacklist="2 3.4" ] pypi

SUMMARY="Store and access your passwords safely."
DESCRIPTION="
Provides easy access to safe password storage services from python applications.
Supports the KDE Wallet, GNOME Keyring and the newer Secret Service API as backends
as well as the native CryptFile and UncryptFile storage.
"

LICENCES="PSF"
SLOT="0"
PLATFORMS="~amd64"
MYOPTIONS=""

# Can use as backend: keyrings.cryptfile, keyring_jeepney, keyrings.alt, gsheet-keyring.
# libgnome-keyring recommended because it's at least present in repos and works TODO
DEPENDENCIES="
    build:
        dev-python/setuptools_scm[>=1.15.0][python_abis:*(-)?]
    build+run:
        dev-python/entrypoints[python_abis:*(-)?]
        dev-python/SecretStorage[>=3.0][python_abis:*(-)?]
    recommendation:
        (
            gnome-desktop/libgnome-keyring:1[gobject-introspection]
        ) [[ *description = [ Used to store passwords in the Gnome Keyring ] *group-name = [ gnome-keyring ] ]]
"

BUGS_TO="virkony@gmail.com"

# Requires unpackaged: pytest-sugar, collective.checkdocs
RESTRICT="test"

